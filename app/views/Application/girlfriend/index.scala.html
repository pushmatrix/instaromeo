@(title:String)

@main(title) {
  	<img src="@asset("public/images/female.png")"/>
  	<img id="prog-ico-anniversary" class="inactive" src="@asset("public/images/anniversary.png")"/>
  	<img id="prog-ico-birthday" class="inactive" src="@asset("public/images/birthday.png")"/>
  	<img id="prog-ico-surprise" class="inactive" src="@asset("public/images/surprise.png")">
  	<img id="prog-ico-calendar" class="inactive" src="@asset("public/images/calendar.png")"/>
  	<img id="prog-ico-checkout" class="inactive" src="@asset("public/images/checkout.png")"/>
  
} {
    <div id="slider1">
      <div class="wiz-slide">@views.Application.girlfriend.html.name()</div>
      <div class="wiz-slide"> @views.Application.girlfriend.html.aniversary()</div>
      <div class="wiz-slide"> @views.Application.girlfriend.html.birthday()</div>
      <div class="wiz-slide"> @views.Application.girlfriend.html.random()</div>
	    <div class="wiz-slide"> @views.Application.girlfriend.html.order()</div>
	    <div class="wiz-slide"> @views.Application.girlfriend.html.checkout()</div>
	    <div class="wiz-slide"> @views.Application.girlfriend.html.confirm()</div>
	    <div class="wiz-slide"> @views.Application.girlfriend.html.congrats()</div>
    </div>
    
    <script>
    $(function(){
      deliveryTemplate = $("#deliveries table tr")[0].outerHTML;
          
      instaromeo_order = {
          gfName: "",
          deliveries: [],
          addDelivery: function(delivery) {
            instaromeo_order.deliveries.push(delivery);
            
            var deliveryHTML = $(deliveryTemplate);
            deliveryHTML.find(".icon img").attr("src", "/public/images/" + delivery.type + ".png");
            deliveryHTML.find(".date-text").text(delivery.date.toString('yyyy-MM-dd'));
            deliveryHTML.attr('id', 'delivery_' + instaromeo_order.deliveries.length);
            deliveryHTML.show();
            $("#deliveries table").append(deliveryHTML[0].outerHTML);
          },
          removeDelivery: function(id) {
            instaromeo_order.deliveries[id] = null;
            $("#delivery_" + id).remove();
          },
          addDeliveryFromDatePicker: function(delivery_type, datepicker_id){
               var delivery = {
                   type: delivery_type,
                   date: Date.parse($("#" + datepicker_id).val())
               };

               this.addDelivery(delivery);      
          },
          addRandomDelivery: function(){
              var date = Date.parse(Math.ceil(Math.random()*12) + "/" + Math.ceil(Math.random()*29));
              if(date.compareTo(Date.parse("Today")) < 0){
                  date.addYears(1);
              }
              var delivery = {
                  type: "random",
                  delivery_date: date 
              };
              this.addDelivery(delivery); 
          }
      };
      
      // initialize common dates
      instaromeo_order.addDelivery({
          type: "valentines", 
          date: Date.parse("February 14")
      });
      
      $('#add-delivery').click(function(){
        var delivery = {
          type: 'surprise',
          date: new Date()
        };
        instaromeo_order.addDelivery(delivery);
      });
      
      slider = $('#slider1').bxSlider({
        mode: 'fade',
        controls: false
      });
      
      function toggleCheck(checkId){
          var checkbox =  $("#" + checkId);
          if (checkbox.is(":empty")){
              checkbox.append("âœ”");
          } else {
              checkbox.empty();
          }
      }
      
       $('.next').click(function(){
            slider.goToNextSlide();
            $(".inactive").first().removeClass("inactive");
            return false;
        });
        
        $("#annivNext").click(function(){
            instaromeo_order.addDeliveryFromDatePicker("anniversary", "anniversary");
        });
        
        $("#birthdayNext").click(function(){
            instaromeo_order.addDeliveryFromDatePicker("birthday", "birthday");
        });
        
        $("#randomNextYes").click(function(){
                instaromeo_order.addRandomDelivery();
        });
        
        $(".div-checkbox").click(function(){
            toggleCheck("chk-random");
        });
        
        $(".datepicker").glDatePicker(
          {
            cssName: "android",
            startDate: new Date(Date.parse("Today")),
            endDate: new Date(Date.parse("Yesterday").addYears(1)),
            allowOld: false,
            position: "fixed",
            onChange: function(target, newDate)
            {
              target.val
              (
                (newDate.getMonth() + 1) + "/" +
                newDate.getDate()
              );
            }
          });
          
          $(".remove").live('click',function(ev){
            ev.preventDefault();
            instaromeo_order.removeDelivery($(this).parent().attr("id").split("_")[1]);
          });
          
          $(".datepicker").live('keyup',function(){
              if (Date.parse($(this).val()) !== null)
              {
                var newDate = Date.parse($(this).val());
                if(newDate.compareTo(Date.parse("Today")) < 0){
                      newDate.addYears(1);
                }
                $(this).glDatePicker("setSelectedDate", newDate);
                $(this).glDatePicker("gotoSelectedDate"); 
              }
    
          });

          var typewatch = (function(){
                var timer = 0;
                return function(callback, ms){
                    clearTimeout (timer);
                    timer = setTimeout(callback, ms);
                }  
                })();
        
    });
    </script>
    
}